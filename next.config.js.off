const base = require("./next.config.base.js");

/**
 * SAFE WRAPPER
 * - Preserves your existing config
 * - Guarantees webpack() returns a valid config object
 */
module.exports = {
  ...(base || {}),
  webpack: (config, options) => {
    const maybe = base && typeof base.webpack === "function"
      ? base.webpack(config, options)
      : config;

    // CRITICAL: never allow undefined to escape
    return maybe || config;
  },
};
